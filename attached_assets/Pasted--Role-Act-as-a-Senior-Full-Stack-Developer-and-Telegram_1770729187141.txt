# Role: 
Act as a Senior Full Stack Developer and Telegram Bot Expert.

# Project Objective:
Create a Telegram Bot with an integrated "Telegram Mini App" (Web App) for streaming Chinese Dramas (Dramabox style). The bot must replicate the UI/UX shown in the attached references (Dark theme, modern dashboard) and consume specific API endpoints provided below.

# Tech Stack:
- **Backend:** Python (using `aiogram` library) or Node.js (Telegraf).
- **Frontend (Mini App):** HTML5, CSS3 (TailwindCSS preferred for styling), and Vanilla JavaScript (or React.js).
- **Database:** SQLite/PostgreSQL (for storing user data, points, and favorites).

# 1. Telegram Bot Features (Chat Interface)
The bot interface (Chat) should handle the /start command and display a Welcome Message with an Inline Keyboard containing:
- Button 1: "ðŸŽ¬ Open App" (Launches the Mini App/Web App).
- Button 2: "Official Group" (URL).
- Button 3: "TopUp" (Callback).
- Button 4: "Help/OSINT" (Callback).
*Reference Image 1: Welcome message style.*

# 2. Mini App (Web App) UI & Features
The Web App must use a Dark Blue/Black theme (as seen in screenshots) and include a Bottom Navigation Bar with tabs: Home, Library, History, Profile.

## A. Home Page (Discover)
- **Search Bar:** Real-time search functionality.
- **Categories/Tabs:** "For You", "Latest", "Trending", "Dub Indo".
- **Content Grid:** Display drama covers with titles.
- **API Integration:**
  - `GET /foryou` -> Display in "For You" section.
  - `GET /latest` -> Display in "Latest" section.
  - `GET /trending` -> Display in "Trending" section.
  - `GET /dubindo?classify=terpopuler&page=1` -> Display in "Dub Indo" section.
  - `GET /randomdrama` -> Feature to recommend a random drama.

## B. Search & Details Page
- **Search Logic:**
  - `GET /populersearch` -> Show popular keywords before typing.
  - `GET /search?query={user_input}` -> Fetch results based on input.
- **Drama Detail View:**
  - When a user clicks a drama, show the cover, title, synopsis, and tags.
  - API: `GET /detail?bookId={id}`.
- **Video Player/Episodes:**
  - List all episodes available.
  - API: `GET /allepisode?bookId={id}` -> Use the video URL provided in this response to play the video in a custom HTML5 video player within the Mini App.

## C. Profile & Membership (Reference Image 2)
- **User Info:** Display User Avatar, Name, User ID (from Telegram WebAppUser data).
- **Stats Grid:** Show Points, Commission, Referral Count.
- **Membership Section:**
  - Display current status (e.g., "Free Member").
  - "Upgrade" button.
  - Referral Link section (generate a link like `t.me/MyBot?start=ref_123`).
- **Pricing Cards:** Display "Lifetime" and "1 Year" plans as seen in the screenshot.
  - API Reference for VIP info: `GET /vip`.

## D. Library & History (Reference Image 4)
- **Tabs:** "History" (Riwayat) and "Favorites" (Favorit).
- **Functionality:**
  - Save watched dramas to local storage or database.
  - Allow users to "Heart/Like" a drama to save to Favorites.

## E. Help Center (Reference Image 5)
- **Form:** Inputs for "Issue Type" and "Description".
- **Button:** "Send Report" (This should send a message to the bot admin via the Telegram API).

# 3. API Endpoints Configuration
Base URL: `https://api.sansekai.my.id/api/dramabox`

Use these specific endpoints for the logic:
1. **Home Feed:** `/foryou`
2. **VIP Info:** `/vip`
3. **Indonesian Dubs:** `/dubindo?classify=terpopuler&page=1`
4. **Random Suggestion:** `/randomdrama`
5. **New Releases:** `/latest`
6. **Trending:** `/trending`
7. **Search Suggestions:** `/populersearch`
8. **Search Query:** `/search?query={keyword}`
9. **Drama Details:** `/detail?bookId={id}`
10. **Episode Links:** `/allepisode?bookId={id}`

# 4. Design Guidelines (CSS)
- **Background:** Dark Navy/Black (#0b1426 to #111827).
- **Accent Color:** Purple/Blue Gradient (like the "Upgrade" button in Image 2).
- **Typography:** Sans-serif, white text for readability.
- **Layout:** Mobile-first, responsive design (since it's a Telegram Web App).

# Deliverables:
1. Provide the Python code for `main.py` (Bot startup).
2. Provide the HTML/JS/CSS structure for the Web App (Single Page Application structure).
3. Explain how to connect the Frontend to the provided APIs using `fetch` or `axios`.